From me 2002
Date: Thu, 10 Jul 2003 10:37:07 +0200
From: Mark Overmeer <Mark@Overmeer.net>
To: Mail-Box Mailinglist <mailbox@perl.overmeer.net>
Subject: Mail::Box v2.043 [Destruct, Doc]
Message-ID: <20030710103707.J5754@speeltuin.ATComputing.nl>
Mail-Followup-To: Mark Overmeer <Mark@Overmeer.net>,
	Mail-Box Mailinglist <mailbox@perl.overmeer.net>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="envbJBWh7q8WU6mo"
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
Organization: MARKOV Solutions
Status: RO
Content-Length: 3519
Lines: 107


--envbJBWh7q8WU6mo
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline


Hi,

Did take some while between releases, mainly due to my trip to
YAPC::NA, but hereby I present the latest version.  The full
changelog is attached, but the main changes explained:

 - Many documentation extensions, which now show the benefits of
   the OODoc transition made.  The new documentation index will
   show you how much has been added (Mail::Box-Index)

 - Many people with large mailboxes have complained about the
   memory consumption of Mail::Box.  Two major improvements:

      1) Todd Richmond has implemented a replacement for IO::Scalar
         [which has a memory leak!!], and this is now included as
         Mail::Box::FastScalar.

      2) A new $msg->destruct(), which flags a message for deletion,
         and immediately releases the memory consumed by header and
         body (not the flags etc).  If you use it, do it with care!!

            my $folder = $msg->open('InBox', extract => 'LAZY');
            for my $msg ($folder->messages)
            {   ...;
                $msg->destruct;
            }

   Please test!

 - Mail::Message->read() and bounce() will strip (X-)Status fields:
   they are for the user's internal administration and should not be
   accidentally disturbed by received messages.

I expect another release next week, but please test this release and
give me feed-back.
-- 
               MarkOv

------------------------------------------------------------------------
drs Mark A.C.J. Overmeer                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
http://Mark.Overmeer.net                   http://solutions.overmeer.net

--envbJBWh7q8WU6mo
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="ChangeLog-2.043"

version 2.043: Thu Jul 10 10:18:51 CEST 2003

	Fixes:

	- [Greg Matheson] small doc-fix for Mail::Message::Body::Construct
	  foreachLine().

	- [Wiggins d'Anconia] time generated by strftime left %z on non-gnu
	  systems.  On those systems, a work-around is made using
	  Date::Format.

	- appendMessage in Mail::Box::File coerces message into the
	  correct sub-class.

	- Mail::Message::Head::Delayed is not empty.

	- Mail::Message->read will strip the status fields from the header
	  by default, for security considerations.

	- Mail::Message->bounce will not interpret status fields.

	Improvements:

	- labelsToStatus and statusToLabels are now only implemented for
	  file based folder types, like mbox.

	- Implemented Mail::Box::Message::Destructed with a
	  Mail::Box::Message::destruct(), Mail::Message::destruct(), and
	  Mail::Message::Part::destruct(), tests/50mesage/60destruct.t
	  to forcefully free-up most memory used by a message.

	- Added Mail::Box-Index, the documentation index.

	- Extended documentation about
          . various ways to access header field data
          . message labels (flags)
          . various class relations

	- Now requires Object::Realize::Later version 0.12

	- [Todd Richmond] contributed Mail::Box::FastScalar, which is
	  a replacement of IO::Scalar... but faster.  It should be a
	  separate module, but for now it has a place.
	  FastScalar is faster and does not leak, as its brother.

	- Removed last uses of IO::ScalarArray, because it seeks awfully
	  slow.

	- Added Mail::Message::study()
	        Mail::Message::Head::study()
	  but it is not usuable yet.


--envbJBWh7q8WU6mo--

